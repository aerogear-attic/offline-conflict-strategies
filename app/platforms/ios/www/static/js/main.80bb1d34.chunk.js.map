{"version":3,"sources":["../../../../aerogear-js-sdk/packages/sync/dist/createClient.js","../../../../aerogear-js-sdk/packages/sync/dist/config/DefaultConfig.js","../../../../aerogear-js-sdk/packages/sync/dist/config/ConfigError.js","../../../../aerogear-js-sdk/packages/sync/dist/conflicts/conflictLink.js","../../../../aerogear-js-sdk/packages/sync/dist/links/WebsocketLink.js","queries.js","view/ListUser.js","sdk/optimisitcUIEnhancer.js","view/AddUser.js","sdk/apolloClient.js","sdk/mutations/SyncOfflineMutation.js","App.js","index.js","../../../../aerogear-js-sdk/packages/sync/dist/index.js","../../../../aerogear-js-sdk/packages/sync/dist/links/LinksBuilder.js","../../../../aerogear-js-sdk/packages/sync/dist/conflicts/strategies.js"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","_this","Object","defineProperty","exports","apollo_cache_inmemory_1","__webpack_require__","apollo_cache_persist_1","apollo_client_1","DefaultConfig_1","LinksBuilder_1","createClient","userConfig","clientConfig","cache","link","_a","storage","InMemoryCache","dataIdFromObject","persistCache","buildStorage","config","SyncConfig","merge","applyPlatformConfig","validate","extractConfig","defaultLinkBuilder","ApolloClient","core_1","ConfigError_1","window","localStorage","prototype","clientOptions","assign","configuration","INSTANCE","getConfigByType","serviceConfiguration","httpUrl","url","ConfigError","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","create","_super","message","fieldName","Error","apollo_link_error_1","strategies_1","conflictLink","onError","operation","forward","data","graphQLErrors","_i","graphQLErrors_1","err","extensions","exception","type","getConflictData","resolvedConflict","conflictStrategy","strategies","diffMergeClientWins","variables","version","apollo_link_ws_1","defaultWebSocketLink","options","WebSocketLink","uri","connectionParams","connectionCallback","timeout","inactivityTimeout","reconnectionAttempts","reconnect","lazy","ADD_USER","gql","_templateObject","GET_USERS","_templateObject2","DELETE_USER","_templateObject3","UPDATE_USER","_templateObject4","USER_SUBSCRIPTION","_templateObject5","ListUserTable","_React$Component","classCallCheck","possibleConstructorReturn","getPrototypeOf","arguments","inherits","createClass","key","react_default","a","createElement","Table","striped","bordered","condensed","hover","props","allUsers","map","item","ListUser_UserItem","React","Component","ListUser","_React$Component2","state","first","Number","handleLoadMore","bind","assertThisInitialized","fetchMore","setState","updateQuery","prev","_ref","fetchMoreResult","toConsumableArray","concat","subscribeToMore","userUpdatesSubscription","console","log","document","subscriptionUpdate","_ref2","subscriptionData","isArray","newItem","userCreated","_this2","react_apollo_browser_umd","query","fetchPolicy","errorPolicy","_ref3","networkStatus","refetch","error","_ref3$data","_data$allUsers","info","ListUser_ListUserTable","ButtonToolbar","Button","bsStyle","onClick","handleSubscribeForMore","UserItem","_this3","loading","isOffline","updateList","readQuery","writeQuery","onUpdate","_ref5","asyncToGenerator","regenerator_default","mark","_callee","_ref4","client","optimisticResponse","wrap","_context","name","Utils","generateId","dateOfBirth","moment","toString","id","__typename","updateUser","objectSpread","mutate","mutation","update","refetchQueries","finish","stop","_x","incrementVersion","updateDelete","_ref6","deleteUser","newUsers","filter","user","onDelete","_ref8","_callee2","_ref7","_context2","_x2","addEventListener","_this4","ButtonGroup","disabled","withApollo","createNewOptimisticResponse","fields","chars","i","undefined","Math","floor","random","createUser","AddUser","_getPrototypeOf2","_len","args","_key","Date","counter","style","marginTop","marginBottom","ctr","setupApolloClient","wsUrl","abrupt","SyncOfflineMutation","apolloClient","getOfflineData","getItem","storeKey","hasOfflineData","offlineData","addOfflineData","queue","setItem","JSON","stringify","clearOfflineData","removeItem","init","_callee3","stored","_context3","parse","sync","_callee5","uncommittedOfflineMutation","_context5","all","_callee4","_context4","t0","App","syncOfflineMutation","Fragment","className","AddUser_AddUser","ListUser_ListUser","ReactDOM","render","src_App_0","getElementById","__export","m","apollo_link_1","apollo_link_http_1","apollo_utilities_1","conflictLink_1","WebsocketLink_1","customLinkBuilder","compositeLink","links","HttpLink","unshift","ApolloLink","from","wsLink","split","_b","getMainDefinition","kind","__importDefault","mod","__esModule","default","deepmerge_1","server","diffMergeServerWins"],"mappings":"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","file":"static/js/main.80bb1d34.chunk.js","sourcesContent":["\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [0, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar _this = this;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar apollo_cache_inmemory_1 = require(\"apollo-cache-inmemory\");\n\nvar apollo_cache_persist_1 = require(\"apollo-cache-persist\");\n\nvar apollo_client_1 = require(\"apollo-client\");\n\nvar DefaultConfig_1 = require(\"./config/DefaultConfig\");\n\nvar LinksBuilder_1 = require(\"./links/LinksBuilder\");\n/**\n * Factory for creating Apollo Client\n *\n * @param options options object used to build client\n */\n\n\nexports.createClient = function (userConfig) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var clientConfig, cache, link;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          clientConfig = extractConfig(userConfig);\n          return [4\n          /*yield*/\n          , buildStorage(clientConfig)];\n\n        case 1:\n          cache = _a.sent();\n          link = LinksBuilder_1.defaultLinkBuilder(clientConfig);\n          return [2\n          /*return*/\n          , new apollo_client_1.ApolloClient({\n            link: link,\n            cache: cache\n          })];\n      }\n    });\n  });\n};\n/**\n * Extract configuration from user and external sources\n */\n\n\nfunction extractConfig(userConfig) {\n  var config = new DefaultConfig_1.SyncConfig();\n  var clientConfig = config.merge(userConfig);\n  config.applyPlatformConfig(clientConfig);\n  config.validate(config);\n  return clientConfig;\n}\n/**\n * Build storage that will be used for caching data\n *\n * @param clientConfig\n */\n\n\nfunction buildStorage(clientConfig) {\n  return __awaiter(this, void 0, void 0, function () {\n    var cache, storage;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          cache = new apollo_cache_inmemory_1.InMemoryCache({\n            dataIdFromObject: function dataIdFromObject() {\n              return clientConfig.dataIdFromObject;\n            }\n          });\n          storage = clientConfig.storage;\n          return [4\n          /*yield*/\n          , apollo_cache_persist_1.persistCache({\n            cache: cache,\n            storage: storage\n          })];\n\n        case 1:\n          _a.sent();\n\n          return [2\n          /*return*/\n          , cache];\n      }\n    });\n  });\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar core_1 = require(\"@aerogear/core\");\n\nvar ConfigError_1 = require(\"./ConfigError\"); // Legacy platform configuration that needs to be merged into sync configuration\n\n\nvar TYPE = \"sync\";\n/**\n * Class for managing user and default configuration.\n * Default config is applied on top of user provided configuration\n */\n\nvar SyncConfig =\n/** @class */\nfunction () {\n  function SyncConfig() {\n    // Explicitly use id as id field\n    this.dataIdFromObject = \"id\"; // Use browser storage by default\n\n    this.storage = window.localStorage; // Default config can depend on parameters\n  }\n  /**\n   * Method used to join user configuration with defaults\n   */\n\n\n  SyncConfig.prototype.merge = function (clientOptions) {\n    return Object.assign(this, clientOptions);\n  };\n  /**\n   * Platform configuration that is generated and supplied by OpenShift\n   *\n   * @param config user supplied configuration\n   */\n\n\n  SyncConfig.prototype.applyPlatformConfig = function (config) {\n    var configuration = core_1.INSTANCE.getConfigByType(TYPE);\n\n    if (configuration && configuration.length > 0) {\n      var serviceConfiguration = configuration[0];\n      config.httpUrl = serviceConfiguration.url;\n    }\n  };\n\n  SyncConfig.prototype.validate = function (userConfig) {\n    if (!userConfig.httpUrl) {\n      throw new ConfigError_1.ConfigError(\"Missing server URL\", \"httpUrl\");\n    }\n  };\n\n  return SyncConfig;\n}();\n\nexports.SyncConfig = SyncConfig;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * User provided configuration error\n */\n\nvar ConfigError =\n/** @class */\nfunction (_super) {\n  __extends(ConfigError, _super);\n\n  function ConfigError(message, fieldName) {\n    var _this = _super.call(this, message) || this;\n\n    _this.fieldName = fieldName;\n    return _this;\n  }\n\n  return ConfigError;\n}(Error);\n\nexports.ConfigError = ConfigError;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar apollo_link_error_1 = require(\"apollo-link-error\");\n\nvar strategies_1 = require(\"./strategies\");\n\nexports.conflictLink = function (config) {\n  /**\n  * Fetch conflict data from the errors returned from the server\n  * @param graphQLErrors array of errors to retrieve conflicted data from\n  */\n  var getConflictData = function getConflictData(graphQLErrors) {\n    if (graphQLErrors) {\n      for (var _i = 0, graphQLErrors_1 = graphQLErrors; _i < graphQLErrors_1.length; _i++) {\n        var err = graphQLErrors_1[_i];\n\n        if (err.extensions) {\n          // TODO need to add flag to check if conflict was resolved on the server\n          if (err.extensions.exception.type === \"AgSync:DataConflict\") {\n            return err.extensions.exception.data;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * Fetch the conflict strategy if one is provided, if not return client wins.\n   */\n\n\n  var getConflictStrategy = function getConflictStrategy() {\n    if (config.conflictStrategy) {\n      return config.conflictStrategy;\n    } else {\n      return strategies_1.strategies.diffMergeClientWins;\n    }\n  };\n\n  return apollo_link_error_1.onError(function (_a) {\n    var operation = _a.operation,\n        forward = _a.forward,\n        graphQLErrors = _a.graphQLErrors;\n    var data = getConflictData(graphQLErrors);\n    var resolvedConflict = getConflictStrategy()(data, operation.variables); // TODO Notify\n\n    resolvedConflict.version = data.version;\n    operation.variables = resolvedConflict;\n    return forward(operation);\n  });\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar apollo_link_ws_1 = require(\"apollo-link-ws\");\n\nexports.defaultWebSocketLink = function (config) {\n  var options = config.options || {};\n  var wsLink = new apollo_link_ws_1.WebSocketLink({\n    uri: config.uri,\n    options: {\n      // Params that can be used to send authentication token etc.\n      connectionParams: options.connectionParams,\n      connectionCallback: options.connectionCallback,\n      timeout: options.timeout || 10000,\n      // How long client should wait to kill connection\n      inactivityTimeout: 10000,\n      // Large value to support offline state connections\n      reconnectionAttempts: options.reconnectionAttempts || 500,\n      // Fixed value to support going offline\n      reconnect: true,\n      // Fixed value to support clients with no subscriptions\n      lazy: true\n    }\n  });\n  return wsLink;\n};","import gql from 'graphql-tag'\n\nexport const ADD_USER = gql`\nmutation createUser($dateOfBirth: String!, $name: String!){\n    createUser(dateOfBirth: $dateOfBirth, name: $name){\n      id\n      name\n      dateOfBirth\n      version\n    }\n  }\n`\n\nexport const GET_USERS = gql`\n  query allUsers($first: Int) {\n    allUsers(first: $first){\n      id\n      name\n      dateOfBirth\n      version\n    }\n}\n`\n\nexport const DELETE_USER = gql`\nmutation deleteUser($id: ID!){\n  deleteUser(id: $id){\n    id\n    name\n    dateOfBirth\n    version\n  }\n}\n`\n\nexport const UPDATE_USER = gql`\nmutation updateUser($dateOfBirth: String, $id: ID!, $name: String, $version: Int!) {\n  updateUser(dateOfBirth: $dateOfBirth, id: $id, name: $name, version: $version) {\n    dateOfBirth\n    id\n    name\n    version\n  }\n}\n`\n\nexport const USER_SUBSCRIPTION = gql`\n  subscription userCreated {\n    userCreated {\n      id\n      name\n      dateOfBirth\n      version\n    }\n  }\n`;\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { Button, ButtonToolbar, ButtonGroup, Table } from 'react-bootstrap'\nimport moment from 'moment'\nimport { Utils } from 'pcmli.umbrella.uni-core'\nimport { withApollo } from 'react-apollo'\n\nimport { GET_USERS, USER_SUBSCRIPTION, DELETE_USER, UPDATE_USER } from '../queries'\n\nexport class ListUserTable extends React.Component {\n  render() {\n    return (\n      <Table striped bordered condensed hover>\n        <thead>\n          <tr>\n            <th>Name</th>\n            <th>Date</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.props.allUsers.map((item, key) => <UserItem key={key}  {...{ item }} />)}\n        </tbody>\n      </Table>\n    )\n  }\n}\n\nexport class ListUser extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { first: Number(props.first) };\n    // This binding is necessary to make `this` work in the callback\n    this.handleLoadMore = this.handleLoadMore.bind(this);\n  }\n\n  handleLoadMore(fetchMore) {\n    this.setState(state => ({\n      first: state.first * 2\n    }));\n    fetchMore({\n      variables: {\n        first: this.state.first\n      },\n      updateQuery: (prev, { fetchMoreResult }) => {\n        if (!fetchMoreResult) return prev;\n        return Object.assign({}, prev, {\n          allUsers: [...prev.allUsers, ...fetchMoreResult.allUsers]\n        });\n      }\n    })\n  }\n\n  handleSubscribeForMore(subscribeToMore) {\n    if (!this.userUpdatesSubscription) {\n      this.userUpdatesSubscription = subscribeToMore({\n        document: USER_SUBSCRIPTION,\n        updateQuery: this.subscriptionUpdate,\n      })\n    } else {\n      // detect error and resubscribe if needed = UserUpdatesSubscription.catch()\n      console.log(\"Already subscribed to UserCreated updates.\")\n    }\n  }\n\n  subscriptionUpdate(prev, { subscriptionData }) {\n    console.log(prev, subscriptionData)\n    if (!subscriptionData.data) return prev;\n    if (prev.allUsers && Array.isArray(prev.allUsers)) {\n      const newItem = subscriptionData.data.userCreated;\n      console.log(\"Added new item using subscription\", newItem)\n      return {\n        allUsers: [...prev.allUsers, newItem]\n      };\n    }\n    return prev;\n  }\n\n  render() {\n    return (\n      <Query query={GET_USERS} fetchPolicy=\"cache-and-network\" errorPolicy=\"all\">\n        {({ networkStatus, subscribeToMore, fetchMore, refetch, error, data = {} }) => {\n\n          const { allUsers = [] } = data\n          if (error && networkStatus === 8) console.info(\"Network error. Using cached data\", allUsers)\n          return (\n            <div>\n              <ListUserTable allUsers={allUsers} ></ListUserTable>\n              <ButtonToolbar>\n                <Button bsStyle=\"success\" onClick={() => refetch()}>Refresh</Button>\n                <Button bsStyle=\"info\" onClick={() => this.handleLoadMore(fetchMore)}>Load more</Button>\n                <Button bsStyle=\"info\" onClick={() => this.handleSubscribeForMore(subscribeToMore)}>Subscribe for more</Button>\n              </ButtonToolbar>\n            </div>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nclass UserItem extends React.Component {\n\n  state = { loading: false, isOffline: false }\n\n  constructor() {\n    super()\n    window.addEventListener('online', () => this.setState({ isOffline: false }))\n    window.addEventListener('offline', () => this.setState({ isOffline: true }))\n  }\n\n  updateList = (cache) => {\n    const { allUsers } = cache.readQuery({ query: GET_USERS })\n    cache.writeQuery({\n      query: GET_USERS,\n      data: {\n        allUsers: allUsers\n      }\n    })\n  }\n\n\n  onUpdate = async ({ item }) => {\n    const { client } = this.props\n    const { isOffline } = this.state\n    const variables = { name: `${item.name}_${Utils.generateId(1)}`, dateOfBirth: new moment().toString(), id: item.id, version: item.version }\n\n    //use the variable input as the value of optimisticResponse added on the props\n\n    const optimisticResponse = {\n      __typename: 'Mutation',\n      updateUser: {\n        __typename: 'User',\n        ...variables\n      }\n    }\n    this.setState({ loading: true })\n    if (isOffline) {\n      client.mutate({ mutation: UPDATE_USER, variables, optimisticResponse, errorPolicy: 'all', update: this.updateList })\n      this.setState({ loading: false })\n    }\n    else {\n      try {\n        await client.mutate({\n          mutation: UPDATE_USER,\n          variables,\n          optimisticResponse,\n          errorPolicy: 'all',\n          refetchQueries: [{\n            query: GET_USERS\n          }]\n        })\n      }\n      finally {\n        this.setState({ loading: false })\n      }\n    }\n  }\n\n  incrementVersion = (version) => {\n    return version + 1\n  }\n\n  updateDelete = (cache, { data: { deleteUser } }) => {\n    const { allUsers } = cache.readQuery({ query: GET_USERS })\n    const newUsers = allUsers.filter((user) => {\n      return deleteUser.id !== user.id\n    });\n    cache.writeQuery({\n      query: GET_USERS,\n      data: {\n        allUsers: newUsers\n      }\n    })\n  }\n\n  onDelete = async ({ item }) => {\n    const { client } = this.props\n    const variables = { id: item.id }\n    this.setState({ loading: true })\n    await client.mutate({ mutation: DELETE_USER, variables, update: this.updateDelete })\n    this.setState({ loading: false })\n  }\n\n\n  render() {\n    const { item } = this.props\n    const { loading } = this.state\n    return (\n      <tr>\n        <td>{item.name}</td>\n        <td>{item.dateOfBirth.toString()}</td>\n        <td>\n          <ButtonGroup>\n            <Button bsStyle=\"warning\" disabled={loading} onClick={() => this.onUpdate({ item })}>Update</Button>\n            <Button bsStyle=\"danger\" disabled={loading} onClick={() => this.onDelete({ item })}>Delete</Button>\n          </ButtonGroup>\n        </td>\n      </tr>\n    )\n  }\n\n\n}\n\nUserItem = withApollo(UserItem)\n\n\n","\nexport let ID_FIELD = \"id\";\n\nexport const generateId = (length = 8) => {\n    let result = ''\n    const chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\n    for (let i = length; i > 0; i -= 1) {\n        result += chars[Math.floor(Math.random() * chars.length)]\n    }\n    return result\n}\n\nexport const createNewOptimisticResponse = (operation, type, fields) => {\n    const optimisticResponse = {\n        __typename: 'Mutation',\n    }\n\n    optimisticResponse[operation] = {\n        __typename: type,\n        ...fields,\n        version: 1,\n        optimisticResponse: true\n    };\n    optimisticResponse[operation][ID_FIELD] = generateId();\n    return optimisticResponse;\n}","import React from 'react'\nimport { Mutation } from 'react-apollo'\nimport { Button } from 'react-bootstrap'\nimport { createNewOptimisticResponse } from '../sdk/optimisitcUIEnhancer'\nimport { ADD_USER, GET_USERS,  } from '../queries'\n\nconst update = (cache, { data: { createUser } }) => {\n  const { allUsers } = cache.readQuery({ query: GET_USERS })\n  cache.writeQuery({\n    query: GET_USERS,\n    data: { \"allUsers\": allUsers.concat([createUser]) }\n  })\n}\nconst setOptimisticResponse = (data) => {\n  return createNewOptimisticResponse(\"createUser\", \"User\", data)\n}\n\nexport class AddUser extends React.Component {\n\n  state = { name: 'User 1', dateOfBirth: new Date(), counter: 1 }\n\n  render() {\n    return (\n      <div style={{ \"marginTop\": \"10px\", \"marginBottom\": \"10px\" }}>\n        <Mutation mutation={ADD_USER} update={update}\n                  optimisticResponse={setOptimisticResponse(this.state)}>\n          {(createUser) => {\n            return (\n              <Button bsStyle=\"primary\" onClick={() => {\n                createUser({ variables: { name: this.state.name, dateOfBirth: this.state.dateOfBirth } })\n                const ctr = this.state.counter + 1\n                this.setState({ name: `User ${ctr}`, dateOfBirth: new Date(), counter: ctr })\n              }}>Add new</Button>\n            )\n          }}\n        </Mutation>\n\n      </div>\n    )\n  }\n}\n","import { createClient, strategies } from '@aerogear/datasync-js'\nexport const setupApolloClient = async () => {\n\n  // Local server\n  const uri = `http://localhost:4000/graphql`\n  const wsUri = `ws://localhost:4000/graphql`\n  return await createClient({ httpUrl: uri, wsUrl: wsUri, conflictStrategy: strategies.diffMergeClientWins })\n\n}\n","export class SyncOfflineMutation {\n  constructor ({apolloClient, storage} = {}) {\n    if (!apolloClient) throw new Error('Apollo Client instance is required when syncing data, please assign value to it')\n    if (!storage) throw new Error('Storage can be window.localStorage or AsyncStorage but was not set')\n\n    this.apolloClient = apolloClient\n    this.storage = storage\n    this.storeKey = 'offline-mutation-store'\n    this.offlineData = []\n  }\n\n  getOfflineData = async () => {\n    return this.storage.getItem(this.storeKey)\n  }\n\n  hasOfflineData = () => {\n    return !!(this.offlineData && this.offlineData.length > 0)\n  }\n\n  addOfflineData = (queue = []) => {\n\n    //add only if there is a value\n    if (queue && queue.length > 0)\n      this.storage.setItem(this.storeKey, JSON.stringify(queue))\n  }\n\n  clearOfflineData = async () => {\n    this.offlineData = []\n    return this.storage.removeItem(this.storeKey)\n  }\n\n  init = async () => {\n    let stored = await this.getOfflineData()\n    this.offlineData = JSON.parse(stored) || []\n  }\n\n  sync = async () => {\n    //if there is no offline data  then just exit\n    if (!this.hasOfflineData()) return\n\n    //return as promise, but in the end clear the storage\n    const uncommittedOfflineMutation = []\n\n    await Promise.all(this.offlineData.map(async (item) => {\n      try {\n        await this.apolloClient.mutate(item)\n      }\n      catch (e) {\n        //set the errored mutation to the stash\n        uncommittedOfflineMutation.push(item)\n      }\n    }))\n\n    //wait before it was cleared\n    await this.clearOfflineData()\n\n    //then add again the uncommited storage\n    this.addOfflineData(uncommittedOfflineMutation)\n\n  }\n\n}\n\n","import React, {Component} from 'react'\nimport './App.css'\nimport {ApolloProvider} from 'react-apollo'\nimport {ListUser} from './view/ListUser'\nimport {AddUser} from './view/AddUser'\nimport {setupApolloClient} from './sdk/apolloClient'\nimport {SyncOfflineMutation} from './sdk/mutations/SyncOfflineMutation'\n\nclass App extends Component {\n\n  state = {apolloClient: null}\n\n  async componentDidMount() {\n    const apolloClient = await setupApolloClient()\n\n    //if there are items that needs to be sync do it here\n    const syncOfflineMutation = new SyncOfflineMutation({apolloClient, storage: window.localStorage})\n    await syncOfflineMutation.init()\n    await syncOfflineMutation.sync()\n\n    this.setState({apolloClient})\n  }\n\n\n  render() {\n\n    const {apolloClient} = this.state\n    if (!apolloClient) return 'Loading the app'\n\n    return (\n      <ApolloProvider client={apolloClient}>\n        <React.Fragment>\n\n          <div className=\"App\">\n            <header className=\"App-header\">\n              <h1 className=\"App-title\">AeroGear Sync Offline</h1>\n            </header>\n          </div>\n          <div className=\"container\">\n            {/* <SyncButton/> */}\n            <AddUser/>\n            <ListUser first=\"3\"/>\n            <div>\n            </div>\n          </div>\n\n        </React.Fragment>\n      </ApolloProvider>\n    )\n  }\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n// import registerServiceWorker from './registerServiceWorker';\n// Disabled temporarily for development\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n","\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__export(require(\"./createClient\"));\n\n__export(require(\"./links/LinksBuilder\"));\n\n__export(require(\"./conflicts/strategies\"));","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar apollo_link_1 = require(\"apollo-link\");\n\nvar apollo_link_http_1 = require(\"apollo-link-http\");\n\nvar apollo_utilities_1 = require(\"apollo-utilities\");\n\nvar conflictLink_1 = require(\"../conflicts/conflictLink\");\n\nvar WebsocketLink_1 = require(\"./WebsocketLink\");\n/**\n * Default Apollo Link builder\n * Provides out of the box functionality for the users\n */\n\n\nexports.defaultLinkBuilder = function (config) {\n  if (config.customLinkBuilder) {\n    return config.customLinkBuilder(config);\n  }\n\n  var httpLink = new apollo_link_http_1.HttpLink({\n    uri: config.httpUrl\n  }); // TODO drop your links here\n\n  var compositeLink; // TODO this only works for now because there is only one link.\n  // Will need a better strategy for when there are multiple links passed wrt ordering.\n\n  var links = [httpLink];\n\n  if (config.conflictStrategy) {\n    links.unshift(conflictLink_1.conflictLink(config));\n  }\n\n  compositeLink = apollo_link_1.ApolloLink.from(links);\n\n  if (config.wsUrl) {\n    var wsLink = WebsocketLink_1.defaultWebSocketLink({\n      uri: config.wsUrl\n    });\n    compositeLink = apollo_link_1.split(function (_a) {\n      var query = _a.query;\n\n      var _b = apollo_utilities_1.getMainDefinition(query),\n          kind = _b.kind,\n          operation = _b.operation;\n\n      return kind === \"OperationDefinition\" && operation === \"subscription\";\n    }, wsLink, compositeLink);\n  }\n\n  return compositeLink;\n};","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar deepmerge_1 = __importDefault(require(\"deepmerge\"));\n\nvar diffMergeClientWins = function diffMergeClientWins(server, client) {\n  return deepmerge_1.default(server, client);\n};\n\nvar diffMergeServerWins = function diffMergeServerWins(server, client) {\n  return deepmerge_1.default(client, server);\n};\n\nexports.strategies = {\n  diffMergeClientWins: diffMergeClientWins,\n  diffMergeServerWins: diffMergeServerWins\n};"],"sourceRoot":""}